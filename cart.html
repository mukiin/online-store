<!DOCTYPE html>
<html lang="sl">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glasbeni Inštrumenti</title>
    <link rel="icon" type="image/x-icon" href="./images/fire.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="style.css">
    <!-- Font Awesome Cdn -->
    <script src="https://kit.fontawesome.com/e48d166edc.js" crossorigin="anonymous"></script>
    <!-- Bootstrap cdn -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <!-- Owl Carousel File -->
    <link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/owl.carousel.css">
    <!-- CSS File -->
    <link rel="stylesheet" href="css/navigasi.css">
    <link rel="stylesheet" type="text/css" href="css/homepage.css">
    <link rel="stylesheet" href="css/footer.css">
    <style>
      .cart-count {
          background-color: red;
          color: white;
          font-size: 14px;
          border-radius: 50%;
          padding: 3px 7px;
          position: absolute;
          top: 5px;
          right: 10px;
          display: none;
      }
  </style>
</head>

<body>
    <section id="header">
        <a href="#"><img src="images/fire.png" class="logo" alt="" style="width: 30px; height: 30px;"></a>
        <div>
            <ul id="navbar">
                <li><a class="active" href="index.html">Domov</a></li>
                <li><a href="shop.html">Trgovina</a></li>
                <li><a href="about.html">O nas</a></li>
                <li><a href="contact.html">Kontakt</a></li>
                <li id="lg-bag">
                  <a href="cart.html">
                      <i class='bx bx-shopping-bag'></i>
                      <span id="cart-count" class="cart-count">0</span>
                  </a>
              </li>
                <a href="#" id="close"><i class='bx bx-x'></i></a>
            </ul>
        </div>
        <div id="mobile">
            <a href="cart.html"><i class='bx bx-shopping-bag'></i></a>
            <i id="bar" class='bx bx-menu'></i>
        </div>
    </section>

        <section id="page-header" class="about-header">
            <h2>#Košara</h2>
        </section>



        <section id="cart" class="section-p1">
            <table width="100%">
                <thead>
                    <tr>
                        <td>Izbriši</td>
                        <td>Slika</td>
                        <td>Opis</td>
                        <td>Cena</td>
                        <td>Koičina</td>
                        <td>Skupaj</td>
                    </tr>
                </thead>
                <tbody id="cart-items">
                    <!-- JavaScript će dinamički dodati redove ovde -->
                </tbody>
            </table>
        </section>
        
        <section id="cart-add" class="section-p1">
            <div id="coupon">
                <h3>Kupon</h3>
                <div>
                    <input type="text" placeholder="Vnesite kupon">
                    <button class="normal">Dodaj kupon</button>
                </div>
            </div>
        
            <div id="subtotal">
                <h3>Plačilo</h3>
                <table id="cart-total">
                    <!-- JavaScript će dinamički ažurirati ukupno ovde -->
                </table>
                <a href="checkout.html"><button class="normal">Nadaljuj na plačilo</button></a>
            </div>
        </section>

        <footer class="section-p1">
            <div class="col">
                <img class="logo" src="images/fire.png" alt="" style="width: 40px; height: 40px;">
                <h4>Kontakt</h4>
                <p style="color: rgb(90, 88, 88);"><strong>Naslov:</strong> Pot Rdečega križa 36, 1000 Ljubljana</p>
                <p style="color: rgb(90, 88, 88);"><strong>Telefon:</strong> +386 40 123 456</p>
                <p style="color: rgb(90, 88, 88);"><strong>Ure:</strong> 10:00 - 18:00, Pon - Sob</p>
                <div class="follow">
                    <h4>Sledite nam</h4>
                    <div class="icon">
                        <i class='bx bxl-facebook'></i>
                        <i class='bx bxl-twitter'></i>
                        <i class='bx bxl-instagram'></i>
                        <i class='bx bxl-pinterest-alt'></i>
                        <i class='bx bxl-youtube'></i>
                    </div>
                </div>
            </div>
    
            <div class="col">
                <h4>O nas</h4>
                <a href="#">O nas</a>
                <a href="#">Informacije o dostavi</a>
                <a href="#">Pravilnik o zasebnosti</a>
                <a href="#">Pogoji in pogoji</a>
                <a href="#">Kontaktirajte nas</a>
            </div>
    
            <div class="col">
                <h4>Moj račun</h4>
                <a href="#">Prijava</a>
                <a href="#">Ogled košarice</a>
                <a href="#">Moja želja</a>
                <a href="#">Sledenje naročilu</a>
                <a href="#">Pomoč</a>
            </div>
    
            <div class="col install">
                <h4>Namestite aplikacijo</h4>
                <p>Iz App Store ali Google Play</p>
                <div class="row">
                    <img src="./img/pay/app.jpg" alt="">
                    <img src="./img/pay/play.jpg" alt="">
                </div>
                <p>Varna plačilna sredstva</p>
                <img src="./img/pay/pay.png" alt="">
            </div>
    
            <div class="copyright">
              <p style="color: #746a6a;"></p>© 2024, Music Store by Mustafa Čizmić</p>
            </div>
        </footer>
    
        <script src="script.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
            crossorigin="anonymous"></script>
        <!-- jquery JS File -->
        <script src="js/jquery-3.6.0.min.js"></script>
        <!-- Isotope JS File -->
        <script src="plugins/Isotope/isotope.pkgd.min.js"></script>
        <!-- Owl Carousel JS File -->
        <script src="plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
        <!-- Javascript File -->
        <script src="js/modeling.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                // Učitavanje košare iz sessionStorage
                let cartItems = JSON.parse(sessionStorage.getItem("cartItems")) || [];
        
                // Funkcija za prikazivanje proizvoda u košari
                function displayCart() {
                    const cartItemsContainer = document.getElementById("cart-items");
                    cartItemsContainer.innerHTML = ''; // Očisti pre nego što dodate nove stavke
        
                    let total = 0;
        
                    if (cartItems.length === 0) {
                        cartItemsContainer.innerHTML = `<tr><td colspan="6">Košara je prazna</td></tr>`;
                    }
        
                    cartItems.forEach(item => {
                        let row = document.createElement("tr");
        
                        row.innerHTML = `
                            <td><i class='bx bx-x-circle remove-item' data-id="${item.id}"></i></td>
                            <td><img src="${item.image}" alt="${item.name}"></td>
                            <td>${item.name}</td>
                            <td>€${item.price}</td>
                            <td><input type="number" value="${item.quantity}" onchange="updateQuantity('${item.id}', this.value)"></td>
                            <td>€${item.price * item.quantity}</td>
                        `;
                        
                        cartItemsContainer.appendChild(row);
        
                        // Dodavanje event listenera za uklanjanje proizvoda
                        row.querySelector(".remove-item").addEventListener("click", function () {
                            removeItem(this.getAttribute("data-id"));
                        });
        
                        total += item.price * item.quantity; // Računanje ukupnog iznosa
                    });
        
                    // Ažuriranje ukupnog iznosa
                    updateCartTotal(total);
                }
        
                // Funkcija za ažuriranje ukupnog iznosa košare
                function updateCartTotal(total) {
                    const cartTotalContainer = document.getElementById("cart-total");
                    cartTotalContainer.innerHTML = `
                        <tr>
                            <td>Skupaj</td>
                            <td>€${total}</td>
                        </tr>
                        <tr>
                            <td>Poštnina</td>
                            <td>Brezplačna poštnina</td>
                        </tr>
                        <tr>
                            <td><strong>Skupaj</strong></td>
                            <td><strong>€${total}</strong></td>
                        </tr>
                    `;
                }
        
                // Funkcija za ažuriranje količine proizvoda u košari
                function updateQuantity(productId, quantity) {
                    let cartItems = JSON.parse(sessionStorage.getItem("cartItems")) || [];
        
                    // Pronaći proizvod u košari
                    const item = cartItems.find(item => item.id === productId);
                    if (item) {
                        item.quantity = parseInt(quantity); // Ažurirati količinu
        
                        // Ažuriraj sessionStorage sa novim podacima
                        sessionStorage.setItem("cartItems", JSON.stringify(cartItems));
        
                        // Ponovno prikazivanje košare i ukupnog iznosa
                        displayCart();
                    }
                }
        
                // Funkcija za uklanjanje proizvoda iz košare
                function removeItem(productId) {
                    let cartItems = JSON.parse(sessionStorage.getItem("cartItems")) || [];
        
                    // Ukloni null vrednosti ako postoje
                    cartItems = cartItems.filter(item => item && item.id);
        
                    // Filtriraj stavke koje nisu ID koji želimo da obrišemo
                    cartItems = cartItems.filter(item => item.id.toString() !== productId.toString());
        
                    // Ažuriraj sessionStorage
                    sessionStorage.setItem("cartItems", JSON.stringify(cartItems));
        
                    // Odmah reloaduj stranicu da se osveži UI
                    location.reload(); // Ovaj kod je odgovoran za osvežavanje stranice
                }
        
                // Poziv funkcije za prikazivanje proizvoda u košari odmah po učitavanju stranice
                displayCart();
            });
        </script>
        
        
          
    </body>
    
    </html>